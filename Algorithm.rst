В файловой системе Btrfs есть возможность включения сжатия. Все записываемые файлы по возможности будут сжиматься и экономить пространство на носителе HDD или SSD. 

Для SSD это может быть важно в связи с их ограниченным ресурсом на запись.

Согласно `wiki Btrfs <https://btrfs.wiki.kernel.org/index.php/Compression>`_, официально имеется 3 поддерживаемых алгоритма:

===========
**Zlib** 
===========

Это библиотека обобщающая алгоритм сжатия данных DEFLATE используемый в gzip. Высокая степень сжатия, однако не высокая скорость. В Btrfs поддерживается 9 уровней сжатия.

Для использования алгоритма по умолчанию необходимо произвести монтирование носителя по следующей схеме (либо отредактировть запись в файле fstab):
::
 mount -o compress=zlib /dev/... /mount_point

Для выбора степени сжатия необходимо примонтировать накопитель по следующей схеме:
::
 mount -o compress=zlib:N /dev/... /mount_point
 
где N=1,2,...,9.

===========
**Lzo** 
===========

Это алгоритм сжатия разработанный для достижения максимальной скорости распаковки. Высокая скорость сжатия и распаковки достигаются за счет более низкого уровня сжатия по сравнению с другими представленными здесь алгоритмами.

Для использования алгоритма по умолчанию необходимо произвести монтирование носителя по следующей схеме (либо отредактировть запись в файле fstab):
::
 mount -o compress=lzo /dev/... /mount_point

**Внимание!** **Lzo** не поддерживает выбор уровней сжатия!

===========
**Zstd**
===========

Это быстрый алгоритм сжатия данных без потерь, обеспечивающий высокую степень сжатия. Целью данного алгоритма является - высокая степень сжатия (на уровне zlib) в реальном времени.

Для использования алгоритма сжатия по умолчанию (степень сжатия 3) необходимо произвести монтирование носителя по следующей схеме (либо отредактировть запись в файле fstab):
::
 mount -o compress=zstd /dev/... /mount_point

Для выбора степени сжатия необходимо примонтировать накопитель по следующей схеме:
::
 mount -o compress=zstd:N /dev/... /mount_point

где N=1,2,3...15. Не смотря на то, что zstd насчитывает 22 уровня сжатия, на данный момент Btrfs поддерживает максимальный уровень степени сжатия - 15.

==========
**Нюансы**
==========

Перед использованием сжатия данных стоит учитывать, что данный процесс осуществляется за счет вычислительных ресурсов процессора из-за чего нагрузка на CPU несколько возрастает, что может негативно сказаться на производительности системы в некоторых задачах.

Эффективность сжатия данных зависит не только от степени сжатия, но и от самих данных, из-за чего одни данных могут практически не сжиматься в отличие от других. Например часть игр привиденных в `списке <https://github.com/dewdpol/ITS---Info-Test-and-Scripts/blob/main/Games%20List.md>`_ не сжимаются по невыявленным причинам, возможно данные изначально поставляются в сжатом виде и в необходимое время происходит их распаковка.

Для получения информации о сжатых данных необходимо воспользоваться программой `compsize <https://github.com/kilobyte/compsize>`_, поскольку есть вероятность того, что системные средства не смогут определить наличие сжатия и будут отображать "необходимое" место вместо используемого на носителе.

Для запуска программы необходимо ввести команду:
::
sudo compsize */path
